---
// Admin page - no SSR needed, pure client-side
const pageTitle = 'Admin | Gemini Software';
---

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{pageTitle}</title>
  <link rel="icon" type="image/png" href="/img/Logo_degradado.webp">
  
  <!-- Load local fonts to match main site -->
  <style>
    @font-face {
      font-family: 'Montserrat';
      src: url('/fonts/Montserrat-Light.ttf') format('truetype');
      font-weight: 300;
      font-display: swap;
    }
    @font-face {
      font-family: 'Montserrat';
      src: url('/fonts/Montserrat-Regular.ttf') format('truetype');
      font-weight: 400;
      font-display: swap;
    }
    @font-face {
      font-family: 'Montserrat';
      src: url('/fonts/Montserrat-Medium.ttf') format('truetype');
      font-weight: 500;
      font-display: swap;
    }
    @font-face {
      font-family: 'Montserrat';
      src: url('/fonts/Montserrat-SemiBold.ttf') format('truetype');
      font-weight: 600;
      font-display: swap;
    }
    @font-face {
      font-family: 'Montserrat';
      src: url('/fonts/Montserrat-Bold.ttf') format('truetype');
      font-weight: 700;
      font-display: swap;
    }
    @font-face {
      font-family: 'MontserratAlt1';
      src: url('/fonts/MONTSERRATALT1-LIGHT.OTF') format('opentype');
      font-weight: 300;
      font-display: swap;
    }
  </style>
  
  <script>
    // Tailwind config must be defined before loading the CDN
    (window as any).tailwindConfig = {
      theme: {
        extend: {
          colors: {
            cyan: {
              50: '#E6FAFF',
              100: '#CCF5FF',
              200: '#99EBFF',
              300: '#66E1FF',
              400: '#00D3FF',
              500: '#00A8CC',
              600: '#008EAD',
            },
            blue: {
              50: '#E6EDFF',
              100: '#CCDAFF',
              400: '#336BFF',
              500: '#003799',
              600: '#002C7A',
              700: '#00215C',
            },
            'dark-blue': {
              50: '#E6E8ED',
              100: '#CCD1DA',
              400: '#33476B',
              500: '#01183D',
              600: '#011331',
              700: '#010E25',
            },
            gray: {
              50: '#FAFAFA',
              100: '#F5F5F5',
              200: '#E5E6E7',
              300: '#D4D4D4',
              400: '#A3A3A3',
              500: '#737373',
              600: '#525252',
            }
          },
          fontFamily: {
            'montserrat': ['Montserrat', 'system-ui', 'sans-serif'],
            'montserrat-alt': ['MontserratAlt1', 'Montserrat', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Quill Rich Text Editor -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  
  <style>
    /* More selective CSS reset - don't strip all spacing */
    html {
      box-sizing: border-box;
    }
    
    *, *::before, *::after {
      box-sizing: inherit;
    }
    
    body { 
      font-family: 'Montserrat', system-ui, sans-serif;
      font-weight: 400;
      background: #E5E6E7;
      min-height: 100dvh;
      color: #01183D;
      margin: 0;
      padding: 0;
    }
    
    h1, h2, h3, h4 {
      font-family: 'MontserratAlt1', 'Montserrat', sans-serif;
      font-weight: 300;
    }
    
    /* ========== GRADIENTS & BACKGROUNDS ========== */
    .gradient-bg {
      background: linear-gradient(135deg, #01183D 0%, #003799 50%, #01183D 100%);
      position: relative;
    }
    
    .gradient-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(ellipse at 50% 0%, rgba(0, 211, 255, 0.15) 0%, transparent 70%);
      pointer-events: none;
    }
    
    .gradient-text {
      background: linear-gradient(90deg, #00D3FF, #003799);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* ========== CARD STYLES (matching Services.astro) ========== */
    .card {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(0, 211, 255, 0.1);
      border-radius: 1.5rem;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 25px 50px -12px rgba(0, 211, 255, 0.15);
    }
    
    .card-static {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(0, 211, 255, 0.1);
      border-radius: 1.5rem;
    }
    
    /* ========== BUTTON STYLES (matching global.css) ========== */
    .btn-primary {
      position: relative;
      background: linear-gradient(135deg, #00D3FF 0%, #003799 100%);
      color: white;
      font-weight: 500;
      border-radius: 9999px;
      padding: 0.875rem 1.75rem;
      border: none;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 211, 255, 0.3);
      box-sizing: border-box;
      max-width: 100%;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 8px 25px rgba(0, 211, 255, 0.4);
    }
    
    .btn-primary:active {
      transform: translateY(0);
    }
    
    .btn-secondary {
      background: transparent;
      color: #00D3FF;
      font-weight: 500;
      border-radius: 9999px;
      padding: 0.875rem 1.75rem;
      border: 2px solid #00D3FF;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      background: #00D3FF;
      color: #01183D;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 211, 255, 0.3);
    }
    
    .btn-outline {
      background: rgba(255, 255, 255, 0.05);
      color: white;
      font-weight: 500;
      border-radius: 9999px;
      padding: 0.75rem 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      cursor: pointer;
      backdrop-filter: blur(4px);
      transition: all 0.3s ease;
    }
    
    .btn-outline:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: #00D3FF;
    }
    
    /* ========== MODAL STYLES ========== */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(1, 24, 61, 0.9);
      backdrop-filter: blur(8px);
      z-index: 100;
      align-items: center;
      justify-content: center;
      padding: 0.75rem;
    }
    
    @media (min-width: 640px) {
      .modal {
        padding: 1.5rem;
      }
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    /* ========== TAB STYLES (matching main site navigation) ========== */
    .tab {
      position: relative;
      cursor: pointer;
      padding: 1rem 1rem;
      font-weight: 500;
      color: rgba(1, 24, 61, 0.5);
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
      white-space: nowrap;
      flex-shrink: 0;
    }
    
    @media (min-width: 640px) {
      .tab {
        padding: 1.25rem 1.5rem;
      }
    }
    
    .tab:first-child {
      padding-left: 0;
    }
    
    .tab::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, #00D3FF, #003799);
      border-radius: 3px 3px 0 0;
      transition: width 0.3s ease;
    }
    
    .tab:hover {
      color: #003799;
    }
    
    .tab.active {
      color: #01183D;
    }
    
    .tab.active::after {
      width: 100%;
    }
    
    /* ========== TABLE STYLES ========== */
    .table-container {
      overflow-x: auto;
      border-radius: 0 0 1.5rem 1.5rem;
      padding: 0 1.25rem 1.25rem 1.25rem;
    }
    
    @media (min-width: 640px) {
      .table-container {
        padding: 0 1.5rem 1.5rem 1.5rem;
      }
    }
    
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      min-width: 700px;
    }
    
    th {
      padding: 1.25rem 1.75rem;
      text-align: left;
      background: linear-gradient(135deg, rgba(1, 24, 61, 0.03) 0%, rgba(0, 55, 153, 0.05) 100%);
      font-weight: 600;
      color: #01183D;
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.05em;
      border-bottom: 1px solid rgba(0, 211, 255, 0.1);
    }
    
    td {
      padding: 1.25rem 1.75rem;
      border-bottom: 1px solid rgba(0, 211, 255, 0.05);
      vertical-align: middle;
    }
    
    tbody tr {
      transition: all 0.3s ease;
    }
    
    tbody tr:hover {
      background: rgba(0, 211, 255, 0.03);
    }
    
    tbody tr:last-child td {
      border-bottom: none;
    }
    
    td, th {
      white-space: normal;
      word-wrap: break-word;
    }
    
    td:first-child, th:first-child {
      max-width: 200px;
    }
    
    /* ========== INPUT STYLES (matching Contact.astro) ========== */
    .input-field {
      width: 100%;
      max-width: 100%;
      padding: 1rem 1.25rem;
      background: rgba(1, 24, 61, 0.02);
      border: 2px solid rgba(1, 24, 61, 0.1);
      border-radius: 1rem;
      color: #01183D;
      font-family: inherit;
      font-size: 0.9375rem;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }
    
    .input-field::placeholder {
      color: rgba(1, 24, 61, 0.3);
    }
    
    .input-field:focus {
      outline: none;
      border-color: #00D3FF;
      background: white;
      box-shadow: 0 0 0 4px rgba(0, 211, 255, 0.1);
    }
    
    /* Auto-resize textareas */
    .auto-resize {
      resize: vertical;
      min-height: 4.5rem;
      overflow-y: hidden;
    }
    
    /* ========== BADGE STYLES ========== */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-size: 0.8125rem;
      font-weight: 500;
      transition: all 0.2s ease;
      white-space: nowrap;
    }
    
    .badge-success {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.15) 100%);
      color: #059669;
      border: 1px solid rgba(16, 185, 129, 0.3);
    }
    
    .badge-warning {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(217, 119, 6, 0.15) 100%);
      color: #D97706;
      border: 1px solid rgba(245, 158, 11, 0.3);
    }
    
    .badge-info {
      background: linear-gradient(135deg, rgba(0, 211, 255, 0.1) 0%, rgba(0, 55, 153, 0.1) 100%);
      color: #003799;
      border: 1px solid rgba(0, 211, 255, 0.3);
    }
    
    /* ========== ACTION BUTTONS ========== */
    .action-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      border-radius: 0.75rem;
      font-size: 0.8125rem;
      font-weight: 500;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    
    .action-btn-edit {
      background: linear-gradient(135deg, rgba(0, 211, 255, 0.1) 0%, rgba(0, 55, 153, 0.1) 100%);
      color: #003799;
      border: 1px solid rgba(0, 211, 255, 0.2);
    }
    
    .action-btn-edit:hover {
      background: linear-gradient(135deg, #00D3FF 0%, #003799 100%);
      color: white;
      border-color: transparent;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 211, 255, 0.3);
    }
    
    .action-btn-delete {
      background: rgba(239, 68, 68, 0.1);
      color: #DC2626;
      border: 1px solid rgba(239, 68, 68, 0.2);
    }
    
    .action-btn-delete:hover {
      background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
      color: white;
      border-color: transparent;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }
    
    /* ========== STAT CARDS ========== */
    .stat-card {
      position: relative;
      overflow: visible;
      border-width: 1px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
    }
    
    .stat-card:hover {
      transform: translateY(-4px) rotateX(2deg);
      box-shadow: 0 20px 40px -12px rgba(0, 211, 255, 0.25), 0 8px 16px -8px rgba(0, 55, 153, 0.15);
      border-color: rgba(0, 211, 255, 0.2);
    }
    
    .stat-card .stat-icon {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .stat-card:hover .stat-icon {
      transform: scale(1.1) translateZ(20px);
      box-shadow: 0 8px 20px -4px rgba(0, 0, 0, 0.3);
    }
    
    /* ========== LOGO 3D EFFECTS ========== */
    .logo-container-login {
      position: relative;
      transform-style: preserve-3d;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }
    
    .logo-container-login::before {
      content: '';
      position: absolute;
      inset: -2px;
      border-radius: inherit;
      padding: 2px;
      background: linear-gradient(135deg, rgba(0, 211, 255, 0.5), rgba(0, 55, 153, 0.5));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    
    .logo-container-login:hover {
      transform: perspective(1000px) rotateY(5deg) rotateX(-5deg) translateZ(20px);
      box-shadow: 0 25px 50px -12px rgba(0, 211, 255, 0.4), 0 0 40px rgba(0, 211, 255, 0.2);
    }
    
    .logo-container-login:hover::before {
      opacity: 1;
    }
    
    .logo-container-header {
      position: relative;
      transform-style: preserve-3d;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
    }
    
    .logo-container-header:hover {
      transform: perspective(800px) rotateY(-3deg) translateZ(10px) scale(1.05);
      filter: drop-shadow(0 8px 16px rgba(0, 211, 255, 0.4)) drop-shadow(0 0 20px rgba(0, 211, 255, 0.2));
    }
    
    /* ========== SCROLLBAR (matching global.css) ========== */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(1, 24, 61, 0.05);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #00D3FF 0%, #003799 100%);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #00A8CC 0%, #002C7A 100%);
    }
    
    /* ========== LOADING SPINNER ========== */
    .spinner {
      display: none;
      width: 1.25rem;
      height: 1.25rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    .spinner.active {
      display: inline-block;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* ========== CHECKBOX STYLES ========== */
    .checkbox-custom {
      appearance: none;
      width: 1.375rem;
      height: 1.375rem;
      background: rgba(1, 24, 61, 0.05);
      border: 2px solid rgba(1, 24, 61, 0.2);
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      pointer-events: auto;
      z-index: 10;
    }
    
    .checkbox-custom:hover {
      border-color: rgba(0, 211, 255, 0.5);
      background: rgba(0, 211, 255, 0.1);
    }
    
    .checkbox-custom:checked {
      background: linear-gradient(135deg, #00D3FF 0%, #003799 100%);
      border-color: transparent;
    }
    
    .checkbox-custom:checked::after {
      content: '‚úì';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 0.875rem;
      font-weight: bold;
    }
    
    .checkbox-custom:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(0, 211, 255, 0.2);
    }
    
    /* ========== FILTER BUTTONS ========== */
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .filter-btn {
      padding: 0.625rem 1rem;
      border-radius: 0.75rem;
      font-size: 0.8125rem;
      font-weight: 500;
      border: 2px solid rgba(1, 24, 61, 0.1);
      background: white;
      color: rgba(1, 24, 61, 0.6);
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      flex-shrink: 0;
    }
    
    @media (max-width: 640px) {
      .filter-btn {
        padding: 0.5rem 0.75rem;
        font-size: 0.75rem;
      }
    }
    
    .filter-btn:hover {
      border-color: rgba(0, 211, 255, 0.3);
      background: rgba(0, 211, 255, 0.05);
      color: #003799;
      transform: translateY(-1px);
    }
    
    .filter-btn.active {
      background: linear-gradient(135deg, #00D3FF 0%, #003799 100%);
      border-color: transparent;
      color: white;
      box-shadow: 0 4px 12px rgba(0, 211, 255, 0.3);
    }
    
    /* ========== CONVERSATION CARDS (Mobile) ========== */
    .conversation-card {
      display: none;
      background: white;
      border-radius: 1rem;
      padding: 1rem;
      border: 2px solid rgba(1, 24, 61, 0.05);
      transition: all 0.3s ease;
    }
    
    .conversation-card:hover {
      border-color: rgba(0, 211, 255, 0.2);
      box-shadow: 0 4px 12px rgba(0, 211, 255, 0.1);
    }
    
    @media (max-width: 768px) {
      .conversation-card {
        display: block;
      }
      
      #conversationsTab table {
        display: none;
      }
      
      .conversation-card .status-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;
        font-size: 0.75rem;
        font-weight: 600;
      }
      
      .conversation-card .status-badge.hot {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        color: white;
      }
      
      .conversation-card .status-badge.potential {
        background: linear-gradient(135deg, #ffd93d 0%, #f9ca24 100%);
        color: #01183D;
      }
      
      .conversation-card .status-badge.active {
        background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
        color: white;
      }
      
      .conversation-card .status-badge.converted {
        background: linear-gradient(135deg, #00b894 0%, #55efc4 100%);
        color: white;
      }
      
      .conversation-card .status-badge.closed {
        background: linear-gradient(135deg, #636e72 0%, #b2bec3 100%);
        color: white;
      }
    }
    
    /* ========== QUILL EDITOR STYLING ========== */
    :global(.quill-editor) {
      background: white;
      border: 2px solid rgba(1, 24, 61, 0.1);
      border-radius: 1rem;
      overflow: hidden;
    }
    
    :global(.quill-editor .ql-toolbar) {
      background: rgba(1, 24, 61, 0.02);
      border: none;
      border-bottom: 1px solid rgba(1, 24, 61, 0.1);
      padding: 0.75rem;
    }
    
    :global(.quill-editor.ql-container) {
      border: none;
      font-family: 'Montserrat', system-ui, sans-serif;
      font-size: 0.9375rem;
      min-height: 150px;
    }
    
    :global(.quill-editor .ql-editor) {
      min-height: 150px;
      padding: 1rem 1.25rem;
      color: #01183D;
    }
    
    /* Match frontend prose styling with higher specificity */
    :global(.quill-editor .ql-editor h2),
    :global(.quill-editor .ql-container .ql-editor h2) {
      font-size: 1.5rem !important;
      font-family: 'MontserratAlt1', 'Montserrat', sans-serif !important;
      font-weight: 300 !important;
      margin-top: 1.5rem !important;
      margin-bottom: 1rem !important;
      padding-bottom: 0.75rem !important;
      color: #01183D !important;
      line-height: 1.3 !important;
      border-bottom: 1px solid rgba(0, 211, 255, 0.2) !important;
    }
    
    :global(.quill-editor .ql-editor h2:first-child) {
      margin-top: 0 !important;
    }
    
    :global(.quill-editor .ql-editor h3),
    :global(.quill-editor .ql-container .ql-editor h3) {
      font-size: 1.25rem !important;
      font-family: 'MontserratAlt1', 'Montserrat', sans-serif !important;
      font-weight: 500 !important;
      margin-top: 1rem !important;
      margin-bottom: 0.75rem !important;
      color: rgba(1, 24, 61, 0.9) !important;
      line-height: 1.4 !important;
    }
    
    :global(.quill-editor .ql-editor p),
    :global(.quill-editor .ql-container .ql-editor p) {
      color: rgba(1, 24, 61, 0.8) !important;
      line-height: 1.75 !important;
      margin-bottom: 1rem !important;
      font-size: 1rem !important;
    }
    
    :global(.quill-editor .ql-editor p:first-of-type) {
      font-size: 1.125rem !important;
      line-height: 1.75 !important;
      font-weight: 300 !important;
      color: #01183D !important;
    }
    
    :global(.quill-editor .ql-editor strong),
    :global(.quill-editor .ql-container .ql-editor strong) {
      font-weight: 600 !important;
      color: #01183D !important;
      background-color: rgba(0, 211, 255, 0.1) !important;
      padding: 0 0.25rem !important;
      border-radius: 0.25rem !important;
    }
    
    :global(.quill-editor .ql-editor em),
    :global(.quill-editor .ql-container .ql-editor em) {
      font-style: italic !important;
    }
    
    :global(.quill-editor .ql-editor ul),
    :global(.quill-editor .ql-editor ol),
    :global(.quill-editor .ql-container .ql-editor ul),
    :global(.quill-editor .ql-container .ql-editor ol) {
      padding-left: 1.5rem !important;
      margin-top: 1rem !important;
      margin-bottom: 1rem !important;
    }
    
    :global(.quill-editor .ql-editor li),
    :global(.quill-editor .ql-container .ql-editor li) {
      color: rgba(1, 24, 61, 0.8) !important;
      margin-top: 0.375rem !important;
      margin-bottom: 0.375rem !important;
      line-height: 1.75 !important;
    }
    
    :global(.quill-editor .ql-editor ul li::marker) {
      color: #00D3FF !important;
    }
    
    :global(.quill-editor .ql-editor ol li::marker) {
      color: #00D3FF !important;
    }
    
    :global(.quill-editor .ql-editor a),
    :global(.quill-editor .ql-container .ql-editor a) {
      color: #00D3FF !important;
      text-decoration: none !important;
      font-weight: 500 !important;
      text-underline-offset: 2px !important;
      transition: all 0.2s !important;
    }
    
    :global(.quill-editor .ql-editor a:hover),
    :global(.quill-editor .ql-container .ql-editor a:hover) {
      color: #0EA5E9 !important;
      text-decoration: underline !important;
    }
    
    :global(.quill-editor .ql-editor.ql-blank::before) {
      color: rgba(1, 24, 61, 0.3);
      font-style: normal;
    }
    
    :global(.quill-editor:focus-within) {
      border-color: #00D3FF;
      box-shadow: 0 0 0 4px rgba(0, 211, 255, 0.1);
    }
    
    :global(.quill-editor .ql-stroke) {
      stroke: #01183D;
    }
    
    :global(.quill-editor .ql-fill) {
      fill: #01183D;
    }
    
    :global(.quill-editor .ql-picker-label) {
      color: #01183D;
    }
    
    :global(.quill-editor .ql-toolbar button:hover),
    :global(.quill-editor .ql-toolbar button:focus),
    :global(.quill-editor .ql-toolbar button.ql-active) {
      color: #00D3FF;
    }
    
    :global(.quill-editor .ql-toolbar button:hover .ql-stroke),
    :global(.quill-editor .ql-toolbar button:focus .ql-stroke),
    :global(.quill-editor .ql-toolbar button.ql-active .ql-stroke) {
      stroke: #00D3FF;
    }
    
    :global(.quill-editor .ql-toolbar button:hover .ql-fill),
    :global(.quill-editor .ql-toolbar button:focus .ql-fill),
    :global(.quill-editor .ql-toolbar button.ql-active .ql-fill) {
      fill: #00D3FF;
    }
    
    /* ========== ANIMATIONS ========== */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .animate-fadeInUp {
      animation: fadeInUp 0.6s ease forwards;
    }
    
    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    .delay-400 { animation-delay: 0.4s; }
  </style>
</head>

<body>
  
  <!-- ========== LOGIN SCREEN ========== -->
  <div id="loginScreen" class="min-h-screen flex items-center justify-center gradient-bg px-6 py-12 relative">
    <!-- Background pattern like Contact section -->
    <div class="absolute inset-0 bg-[linear-gradient(rgba(0,211,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(0,211,255,0.02)_1px,transparent_1px)] bg-[size:40px_40px] pointer-events-none"></div>
    
    <div class="card p-6 md:p-8 w-full max-w-md relative z-10 modal-content">
      <!-- Logo & Header -->
      <div class="text-center mb-5">
        <div class="inline-flex items-center justify-center logo-container-login rounded-3xl bg-gradient-to-br from-cyan-400 via-blue-500 to-blue-600 mb-5 shadow-2xl shadow-cyan-500/30 p-3" style="width: 12rem;">
          <img src="/img/white-logo.webp" alt="Gemini Software" class="w-full h-auto" />
        </div>
        <h1 class="text-xl md:text-2xl font-montserrat-alt text-dark-blue-500 mb-2">
          Panel de Administraci√≥n
        </h1>
        <p class="text-dark-blue-500/50 font-medium text-sm">
          Ingresa tus credenciales para continuar
        </p>
      </div>
      
      <!-- Login Form -->
      <form id="loginForm" class="space-y-5">
        <div>
          <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
            Correo electr√≥nico
          </label>
          <input 
            type="email" 
            id="loginEmail" 
            required 
            class="input-field"
            placeholder="admin@geminisoftware.mx"
          />
        </div>
        
        <div>
          <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
            Contrase√±a
          </label>
          <input 
            type="password" 
            id="loginPassword" 
            required 
            class="input-field"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          />
        </div>
        
        <div id="loginError" class="hidden p-4 rounded-xl bg-red-50 border border-red-200 text-red-600 text-sm font-medium"></div>
        
        <button type="submit" class="btn-primary w-full flex items-center justify-center gap-3">
          <span id="loginBtnText">Iniciar Sesi√≥n</span>
          <span id="loginBtnLoading" class="spinner"></span>
        </button>
      </form>
      
      <!-- Footer -->
      <p class="text-center text-dark-blue-500/30 text-sm mt-8">
        ¬© 2024 Gemini Software
      </p>
    </div>
  </div>

  <!-- ========== ADMIN DASHBOARD ========== -->
  <div id="adminDashboard" class="hidden min-h-screen">
    
    <!-- Header -->
    <header class="gradient-bg sticky top-0 z-50 shadow-xl">
      <div class="max-w-7xl mx-auto px-5 sm:px-6 md:px-8 lg:px-12">
        <div class="flex items-center justify-between h-24 gap-8">
          <!-- Logo -->
          <div class="flex items-center gap-4">
            <div class="logo-container-header" style="width: 8rem;">
              <img src="/img/white-logo.webp" alt="Gemini" class="w-full h-auto drop-shadow-lg" />
            </div>
            <div>
              <h1 class="text-white font-semibold text-lg">Panel Admin</h1>
              <p class="text-cyan-300/60 text-xs font-medium">Gemini Software</p>
            </div>
          </div>
          
          <!-- Actions -->
          <div class="flex items-center gap-4">
            <a href="/" class="btn-outline text-sm hidden sm:inline-flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
              </svg>
              Ver Sitio
            </a>
            <div class="hidden sm:flex items-center gap-3 px-4 py-2 rounded-xl bg-white/5 border border-white/10">
              <div class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center text-white text-sm font-bold">
                A
              </div>
              <span id="adminName" class="text-white/80 text-sm font-medium">Admin</span>
            </div>
            <button onclick="logout()" class="btn-outline text-sm text-red-300 border-red-400/30 hover:bg-red-500/20 hover:border-red-400/50">
              Salir
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-5 sm:px-6 md:px-8 lg:px-12 py-8">
      
      <!-- Page Title -->
      <div class="mb-8">
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-dark-blue-500/5 border border-dark-blue-500/10 mb-4">
          <span class="w-2 h-2 bg-cyan-400 rounded-full"></span>
          <span class="text-dark-blue-500/60 text-sm font-medium">Dashboard</span>
        </div>
        <h2 class="text-3xl md:text-4xl font-montserrat-alt text-dark-blue-500 leading-tight">
          Bienvenido al <span class="gradient-text">Panel de Control</span>
        </h2>
      </div>
      
      <!-- Stats Grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 sm:gap-6 mb-8">
        
        <!-- Projects Stat -->
        <div class="card stat-card p-4 opacity-0 animate-fadeInUp delay-100">
          <div class="flex items-center justify-between">
            <div class="flex-1 min-w-0">
              <p class="text-dark-blue-500/50 text-xs font-medium uppercase tracking-wide mb-1.5">Proyectos</p>
              <p id="statsProjects" class="text-3xl font-bold text-dark-blue-500">0</p>
            </div>
            <div class="stat-icon w-14 h-14 flex-shrink-0 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/25">
              <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
              </svg>
            </div>
          </div>
        </div>
        
        <!-- Published Stat -->
        <div class="card stat-card p-4 opacity-0 animate-fadeInUp delay-200">
          <div class="flex items-center justify-between">
            <div class="flex-1 min-w-0">
              <p class="text-dark-blue-500/50 text-xs font-medium uppercase tracking-wide mb-1.5">Publicados</p>
              <p id="statsPublished" class="text-3xl font-bold text-emerald-600">0</p>
            </div>
            <div class="stat-icon w-14 h-14 flex-shrink-0 rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-emerald-500/25">
              <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
          </div>
        </div>
        
        <!-- Services Stat -->
        <div class="card stat-card p-4 opacity-0 animate-fadeInUp delay-300">
          <div class="flex items-center justify-between">
            <div class="flex-1 min-w-0">
              <p class="text-dark-blue-500/50 text-xs font-medium uppercase tracking-wide mb-1.5">Servicios</p>
              <p id="statsServices" class="text-3xl font-bold text-cyan-500">0</p>
            </div>
            <div class="stat-icon w-14 h-14 flex-shrink-0 rounded-2xl bg-gradient-to-br from-cyan-400 to-cyan-500 flex items-center justify-center shadow-lg shadow-cyan-500/25">
              <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
          </div>
        </div>
        
        <!-- Contacts Stat -->
        <div class="card stat-card p-4 opacity-0 animate-fadeInUp delay-400">
          <div class="flex items-center justify-between">
            <div class="flex-1 min-w-0">
              <p class="text-dark-blue-500/50 text-xs font-medium uppercase tracking-wide mb-1.5">Contactos</p>
              <p id="statsContacts" class="text-3xl font-bold text-violet-600">0</p>
            </div>
            <div class="stat-icon w-14 h-14 flex-shrink-0 rounded-2xl bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center shadow-lg shadow-violet-500/25">
              <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>
          </div>
        </div>
        
        <!-- Quotes Stat -->
        <div class="card stat-card p-4 opacity-0 animate-fadeInUp delay-500">
          <div class="flex items-center justify-between">
            <div class="flex-1 min-w-0">
              <p class="text-dark-blue-500/50 text-xs font-medium uppercase tracking-wide mb-1.5">Cotizaciones</p>
              <p id="statsQuotes" class="text-3xl font-bold text-purple-600">0</p>
            </div>
            <div class="stat-icon w-14 h-14 flex-shrink-0 rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/25">
              <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Tabs Card -->
      <div class="card-static overflow-hidden">
        <!-- Tab Navigation -->        
        <div class="flex overflow-x-auto border-b border-dark-blue-500/5 bg-white/50 px-4 sm:px-5 md:px-6 lg:px-8">
          <button class="tab active" onclick="switchTab('projects')">
            <span class="flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
              </svg>
              Proyectos
            </span>
          </button>
          <button class="tab" onclick="switchTab('services')">
            <span class="flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              Servicios
            </span>
          </button>
          <button class="tab" onclick="switchTab('contacts')">
            <span class="flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              Contactos
            </span>
          </button>
          <button class="tab" onclick="switchTab('quotes')">
            <span class="flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              Cotizaciones
            </span>
          </button>
          <button class="tab" onclick="switchTab('conversations')">
            <span class="flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
              </svg>
              Conversaciones AI
            </span>
          </button>
        </div>

        <!-- Projects Tab Content -->
        <div id="projectsTab" class="tab-content">
          <!-- Header -->
          <div class="p-5 sm:p-6 lg:p-8 border-b border-dark-blue-500/5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div class="flex-1 min-w-0">
              <h3 class="text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 mb-2">
                Gesti√≥n de Proyectos
              </h3>
              <p class="text-dark-blue-500/50 text-sm">Administra el portafolio de proyectos</p>
            </div>
            <button onclick="openProjectModal()" class="btn-primary text-sm flex items-center justify-center gap-2 whitespace-nowrap">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              Nuevo Proyecto
            </button>
          </div>
          
          <!-- Table -->
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>T√≠tulo</th>
                  <th>Cliente</th>
                  <th>Categor√≠a</th>
                  <th>A√±o</th>
                  <th>Estado</th>
                  <th>Destacado</th>
                  <th class="text-center">Acciones</th>
                </tr>
              </thead>
              <tbody id="projectsTableBody">
                <tr>
                  <td colspan="7" class="text-center py-16">
                    <div class="flex flex-col items-center gap-3">
                      <div class="spinner active" style="width: 2rem; height: 2rem; border-width: 3px; border-color: rgba(0,211,255,0.2); border-top-color: #00D3FF;"></div>
                      <p class="text-dark-blue-500/40 font-medium">Cargando proyectos...</p>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Services Tab Content -->
        <div id="servicesTab" class="tab-content hidden">
          <!-- Header -->
          <div class="p-5 sm:p-6 lg:p-8 border-b border-dark-blue-500/5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div class="flex-1 min-w-0">
              <h3 class="text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 mb-2">
                Gesti√≥n de Servicios
              </h3>
              <p class="text-dark-blue-500/50 text-sm">Administra los servicios ofrecidos</p>
            </div>
            <button onclick="openServiceModal()" class="btn-primary text-sm flex items-center justify-center gap-2 whitespace-nowrap">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              Nuevo Servicio
            </button>
          </div>
          
          <!-- Table -->
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>T√≠tulo</th>
                  <th>Slug</th>
                  <th>Orden</th>
                  <th>Estado</th>
                  <th class="text-center">Acciones</th>
                </tr>
              </thead>
              <tbody id="servicesTableBody">
                <tr>
                  <td colspan="5" class="text-center py-16">
                    <div class="flex flex-col items-center gap-3">
                      <div class="spinner active" style="width: 2rem; height: 2rem; border-width: 3px; border-color: rgba(0,211,255,0.2); border-top-color: #00D3FF;"></div>
                      <p class="text-dark-blue-500/40 font-medium">Cargando servicios...</p>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Contacts Tab Content -->
        <div id="contactsTab" class="tab-content hidden">
          <!-- Header -->
          <div class="p-5 sm:p-6 lg:p-8 border-b border-dark-blue-500/5">
            <h3 class="text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 mb-2">
              Mensajes de Contacto
            </h3>
            <p class="text-dark-blue-500/50 text-sm">Gestiona los mensajes recibidos</p>
          </div>
          
          <!-- Table -->
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th class="w-48">Nombre / Fecha</th>
                  <th class="w-56">Contacto</th>
                  <th class="w-32">Servicio</th>
                  <th class="w-96">Mensaje</th>
                  <th class="w-32">Estado</th>
                  <th class="w-24 text-center">Acciones</th>
                </tr>
              </thead>
              <tbody id="contactsTableBody">
                <tr>
                  <td colspan="6" class="text-center py-16">
                    <div class="flex flex-col items-center gap-3">
                      <svg class="w-12 h-12 text-dark-blue-500/20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                      </svg>
                      <p class="text-dark-blue-500/40 font-medium">Funcionalidad de contactos en desarrollo</p>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Quotes Tab Content -->
      <div id="quotesTab" class="tab-content hidden">
        <!-- Header -->
        <div class="p-5 sm:p-6 lg:p-8 border-b border-dark-blue-500/5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <div class="flex-1 min-w-0">
            <h3 class="text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 mb-2">
              Gesti√≥n de Cotizaciones
            </h3>
            <p class="text-dark-blue-500/50 text-sm">Administra las solicitudes de cotizaci√≥n</p>
          </div>
        </div>
        
        <!-- Table -->
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Empresa</th>
                <th>Contacto</th>
                <th>Plataforma</th>
                <th>Estado</th>
                <th>Fecha</th>
                <th class="text-center">Acciones</th>
              </tr>
            </thead>
            <tbody id="quotesTableBody">
              <tr>
                <td colspan="6" class="text-center py-16">
                  <div class="flex flex-col items-center gap-3">
                    <svg class="w-12 h-12 text-dark-blue-500/20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <p class="text-dark-blue-500/40 font-medium">Cargando cotizaciones...</p>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Conversations Tab Content -->
      <div id="conversationsTab" class="tab-content hidden">
        <!-- Header -->
        <div class="p-5 sm:p-6 lg:p-8 border-b border-dark-blue-500/5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <div class="flex-1 min-w-0">
            <h3 class="text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 mb-2">
              Conversaciones del Chat AI
            </h3>
            <p class="text-dark-blue-500/50 text-sm">Visualiza y gestiona las conversaciones con leads</p>
          </div>
          <button onclick="loadConversations()" class="btn-secondary text-sm flex items-center justify-center gap-2 whitespace-nowrap">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
            </svg>
            Actualizar
          </button>
        </div>
        
        <!-- Filters -->
        <div class="p-5 sm:p-6 lg:p-8 border-b border-dark-blue-500/5 bg-white/50">
          <div class="flex gap-2 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide" style="scroll-snap-type: x proximity;">
            <button onclick="filterConversations('ALL')" class="filter-btn active" data-filter="ALL" style="scroll-snap-align: start;">
              Todas
            </button>
            <button onclick="filterConversations('HOT_LEAD')" class="filter-btn" data-filter="HOT_LEAD" style="scroll-snap-align: start;">
              üî• Leads Calientes
            </button>
            <button onclick="filterConversations('POTENTIAL_LEAD')" class="filter-btn" data-filter="POTENTIAL_LEAD" style="scroll-snap-align: start;">
              ‚≠ê Leads Potenciales
            </button>
            <button onclick="filterConversations('ACTIVE')" class="filter-btn" data-filter="ACTIVE" style="scroll-snap-align: start;">
              üí¨ Activas
            </button>
            <button onclick="filterConversations('CONVERTED')" class="filter-btn" data-filter="CONVERTED" style="scroll-snap-align: start;">
              ‚úÖ Convertidas
            </button>
            <button onclick="filterConversations('CLOSED')" class="filter-btn" data-filter="CLOSED" style="scroll-snap-align: start;">
              üö´ Cerradas
            </button>
          </div>
        </div>
        
        <!-- Table (Desktop) -->
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Estado</th>
                <th>Visitante</th>
                <th>Email</th>
                <th>Mensajes</th>
                <th>√öltimo Mensaje</th>
                <th>Fecha</th>
                <th class="text-center">Acciones</th>
              </tr>
            </thead>
            <tbody id="conversationsTableBody">
              <tr>
                <td colspan="7" class="text-center py-16">
                  <div class="flex flex-col items-center gap-3">
                    <svg class="w-12 h-12 text-dark-blue-500/20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                    </svg>
                    <p class="text-dark-blue-500/40 font-medium">Cargando conversaciones...</p>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- Mobile Cards -->
        <div id="conversationsCardsContainer" class="hidden md:hidden p-5 space-y-3">
          <!-- Cards will be loaded here for mobile -->
        </div>
      </div>
    </div>
      
    </main>
    
    <!-- Footer -->
    <footer class="max-w-7xl mx-auto px-5 sm:px-6 md:px-8 lg:px-12 py-8 text-center">
      <p class="text-dark-blue-500/30 text-sm">
        ¬© 2024 Gemini Software. Panel de Administraci√≥n v1.0
      </p>
    </footer>
  </div>

  <!-- ========== PROJECT MODAL ========== -->
  <div id="projectModal" class="modal">
    <div class="card-static max-w-4xl w-full max-h-[90vh] overflow-y-auto modal-content">
      <!-- Modal Header -->
      <div class="sticky top-0 z-10 px-6 py-5 lg:px-8 lg:py-6 border-b border-dark-blue-500/5 bg-white/95 backdrop-blur flex items-center justify-between gap-4">
        <h3 id="projectModalTitle" class="text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 flex-1 min-w-0 truncate">
          Nuevo Proyecto
        </h3>
        <button onclick="closeProjectModal()" class="w-10 h-10 flex-shrink-0 rounded-xl bg-dark-blue-500/5 hover:bg-red-50 text-dark-blue-500/40 hover:text-red-500 transition-all flex items-center justify-center">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <!-- Modal Body -->
      <form id="projectForm" class="p-6 lg:p-8 space-y-6">
        <input type="hidden" id="projectId">
        
        <!-- Row 1: Title & Slug -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              T√≠tulo <span class="text-red-500">*</span>
            </label>
            <input type="text" id="projectTitle" required class="input-field" placeholder="Nombre del proyecto">
          </div>
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Slug <span class="text-red-500">*</span>
            </label>
            <input type="text" id="projectSlug" required class="input-field" placeholder="nombre-del-proyecto">
          </div>
        </div>

        <!-- Row 2: Category, Client, Year -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Categor√≠a <span class="text-red-500">*</span>
            </label>
            <input type="text" id="projectCategory" required class="input-field" placeholder="Web App, E-commerce...">
          </div>
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Cliente
            </label>
            <input type="text" id="projectClient" class="input-field" placeholder="Nombre del cliente">
          </div>
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              A√±o <span class="text-red-500">*</span>
            </label>
            <input type="text" id="projectYear" required class="input-field" placeholder="2024">
          </div>
        </div>

        <!-- Row 3: Project Type -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Tipo de Proyecto
            </label>
            <select id="projectType" class="input-field">
              <option value="">Seleccionar tipo...</option>
              <option value="Development">Development (Nuevo)</option>
              <option value="Redesign">Redesign (Redise√±o)</option>
            </select>
          </div>
        </div>

        <!-- Subtitle -->
        <div>
          <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
            Subt√≠tulo
          </label>
          <input type="text" id="projectSubtitle" class="input-field" placeholder="Una breve descripci√≥n en una l√≠nea">
        </div>

        <!-- Short Description -->
        <div>
          <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
            Descripci√≥n Corta <span class="text-red-500">*</span>
          </label>
          <textarea id="projectDescription" required rows="3" class="input-field auto-resize" placeholder="Descripci√≥n breve que aparecer√° en las tarjetas"></textarea>
        </div>

        <!-- Long Description - Block Editor -->
        <div class="border border-dark-blue-500/10 rounded-2xl p-4 sm:p-6 bg-dark-blue-500/5">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
            <label class="block text-sm font-semibold text-dark-blue-500/70">
              Descripci√≥n Completa
              <span class="block text-xs font-normal text-dark-blue-500/40 mt-1">Crea bloques de contenido estructurado</span>
            </label>
            <div class="flex flex-wrap gap-2">
              <button type="button" onclick="addContentBlock('text')" class="px-3 py-2 bg-dark-blue-500 text-white text-xs font-medium rounded-lg hover:bg-dark-blue-600 transition-colors flex items-center gap-1.5" title="Agregar bloque de texto">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                Texto
              </button>
              <button type="button" onclick="addContentBlock('two-column')" class="px-3 py-2 bg-cyan-500 text-white text-xs font-medium rounded-lg hover:bg-cyan-600 transition-colors flex items-center gap-1.5" title="Agregar 2 columnas">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 4H5a2 2 0 00-2 2v14a2 2 0 002 2h4m0-18v18m0-18l10.5 0M9 22l10.5 0m0-18a2 2 0 012 2v14a2 2 0 01-2 2"/>
                </svg>
                2 Columnas
              </button>
              <button type="button" onclick="addContentBlock('highlight')" class="px-3 py-2 bg-amber-500 text-white text-xs font-medium rounded-lg hover:bg-amber-600 transition-colors flex items-center gap-1.5" title="Agregar destacado">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Destacado
              </button>
              <button type="button" onclick="addContentBlock('cards')" class="px-3 py-2 bg-purple-500 text-white text-xs font-medium rounded-lg hover:bg-purple-600 transition-colors flex items-center gap-1.5" title="Agregar tarjetas">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm10 0a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zm10 0a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"/>
                </svg>
                Tarjetas
              </button>
            </div>
          </div>
          <div id="contentBlocksContainer" class="space-y-3 min-h-[100px] empty:border-2 empty:border-dashed empty:border-dark-blue-500/20 empty:rounded-lg empty:flex empty:items-center empty:justify-center empty:text-dark-blue-500/40 empty:text-sm empty:py-8" data-empty-message="Agrega bloques de contenido usando los botones de arriba">
            <!-- Dynamic content blocks will be added here -->
          </div>
          <input type="hidden" id="projectLongDescription" />
        </div>

        <!-- Row: Duration & Website -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Duraci√≥n
            </label>
            <input type="text" id="projectDuration" class="input-field" placeholder="ej: 3 meses">
          </div>
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Sitio Web
            </label>
            <input type="url" id="projectWebsite" class="input-field" placeholder="https://...">
          </div>
        </div>

        <!-- Tags -->
        <div>
          <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
            Tags <span class="text-dark-blue-500/30 font-normal">(separados por coma)</span>
          </label>
          <input type="text" id="projectTags" class="input-field" placeholder="React, Node.js, PostgreSQL, AWS...">
        </div>

        <!-- Results/Metrics -->
        <div class="border border-dark-blue-500/10 rounded-2xl p-4 sm:p-6 bg-dark-blue-500/5">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
            <label class="block text-sm font-semibold text-dark-blue-500/70">
              Resultados del Proyecto
            </label>
            <button type="button" onclick="addProjectResult()" class="px-4 py-2 bg-cyan-500 text-white text-sm font-medium rounded-lg hover:bg-cyan-600 transition-colors flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              Agregar Resultado
            </button>
          </div>
          <div id="projectResultsContainer" class="space-y-3">
            <!-- Dynamic result inputs will be added here -->
          </div>
          <p class="text-xs text-dark-blue-500/40 mt-3">M√©tricas y resultados clave del proyecto (ej: "50% aumento en ventas", "10K usuarios activos")</p>
        </div>

        <!-- Project Images Carousel -->
        <div class="border border-dark-blue-500/10 rounded-2xl p-4 sm:p-6 bg-dark-blue-500/5">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
            <label class="block text-sm font-semibold text-dark-blue-500/70">
              Im√°genes del Proyecto
              <span class="block text-xs font-normal text-dark-blue-500/40 mt-1">Las im√°genes se suben al guardar el proyecto</span>
            </label>
            <button type="button" onclick="handleMultipleImages()" class="px-4 py-2 bg-cyan-500 text-white text-sm font-medium rounded-lg hover:bg-cyan-600 transition-colors flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              Seleccionar Im√°genes
            </button>
          </div>
          <div id="projectImagesContainer" class="space-y-3">
            <!-- Dynamic image inputs will be added here -->
          </div>
        </div>

        <!-- Row: Order, Published, Featured, In Progress -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-end">
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Orden
            </label>
            <input type="number" id="projectOrder" value="0" class="input-field">
          </div>
          <div class="flex items-center gap-3 pb-3 h-full items-end">
            <input type="checkbox" id="projectPublished" class="checkbox-custom flex-shrink-0">
            <label for="projectPublished" class="text-sm font-semibold text-dark-blue-500/70 cursor-pointer select-none">
              Publicado
            </label>
          </div>
          <div class="flex items-center gap-3 pb-3 h-full items-end">
            <input type="checkbox" id="projectFeatured" class="checkbox-custom flex-shrink-0">
            <label for="projectFeatured" class="text-sm font-semibold text-dark-blue-500/70 cursor-pointer select-none">
              Destacado
            </label>
          </div>
          <div class="flex items-center gap-3 pb-3 h-full items-end">
            <input type="checkbox" id="projectInProgress" class="checkbox-custom flex-shrink-0">
            <label for="projectInProgress" class="text-sm font-semibold text-dark-blue-500/70 cursor-pointer select-none">
              En Progreso
            </label>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-dark-blue-500/5">
          <button type="submit" class="btn-primary flex-1 flex items-center justify-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <span id="projectSaveBtn">Guardar Proyecto</span>
            <span id="projectSaveLoading" class="spinner"></span>
          </button>
          <button type="button" onclick="closeProjectModal()" class="btn-secondary">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ========== SERVICE MODAL ========== -->
  <div id="serviceModal" class="modal">
    <div class="card-static max-w-2xl w-full max-h-[90vh] overflow-y-auto modal-content">
      <!-- Modal Header -->
      <div class="sticky top-0 z-10 px-6 py-5 lg:px-8 lg:py-6 border-b border-dark-blue-500/5 bg-white/95 backdrop-blur flex items-center justify-between gap-4">
        <h3 id="serviceModalTitle" class="text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 flex-1 min-w-0 truncate">
          Nuevo Servicio
        </h3>
        <button onclick="closeServiceModal()" class="w-10 h-10 flex-shrink-0 rounded-xl bg-dark-blue-500/5 hover:bg-red-50 text-dark-blue-500/40 hover:text-red-500 transition-all flex items-center justify-center">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <!-- Modal Body -->
      <form id="serviceForm" class="p-6 lg:p-8 space-y-6">
        <input type="hidden" id="serviceId">
        
        <!-- Row: Title & Slug -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              T√≠tulo <span class="text-red-500">*</span>
            </label>
            <input type="text" id="serviceTitle" required class="input-field" placeholder="Nombre del servicio">
          </div>
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Slug <span class="text-red-500">*</span>
            </label>
            <input type="text" id="serviceSlug" required class="input-field" placeholder="nombre-del-servicio">
          </div>
        </div>

        <!-- Description -->
        <div>
          <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
            Descripci√≥n <span class="text-red-500">*</span>
          </label>
          <textarea id="serviceDescription" required rows="4" class="input-field auto-resize" placeholder="Descripci√≥n del servicio..."></textarea>
        </div>

        <!-- Icon Selector - Interactive -->
        <div class="p-5 bg-gradient-to-br from-cyan-50 via-blue-50 to-cyan-50 border-2 border-cyan-400/30 rounded-xl shadow-sm">
          <div class="flex items-center gap-2 mb-4">
            <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
            </svg>
            <h4 class="font-bold text-base text-cyan-900">Selecciona un Icono</h4>
          </div>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-3" id="iconSelector">
            <!-- Code Icon -->
            <button type="button" onclick="selectServiceIcon('code', this)" class="icon-option text-left bg-white p-3 rounded-lg border-2 border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all hover:scale-105">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-8 h-8 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                  </svg>
                </div>
                <code class="bg-cyan-100 px-2 py-0.5 rounded text-xs font-bold text-cyan-800">code</code>
              </div>
              <div class="text-xs text-gray-600">Desarrollo Web</div>
            </button>
            
            <!-- Mobile Icon -->
            <button type="button" onclick="selectServiceIcon('mobile', this)" class="icon-option text-left bg-white p-3 rounded-lg border-2 border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all hover:scale-105">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-8 h-8 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                  </svg>
                </div>
                <code class="bg-cyan-100 px-2 py-0.5 rounded text-xs font-bold text-cyan-800">mobile</code>
              </div>
              <div class="text-xs text-gray-600">Apps M√≥viles</div>
            </button>
            
            <!-- Software Icon -->
            <button type="button" onclick="selectServiceIcon('software', this)" class="icon-option text-left bg-white p-3 rounded-lg border-2 border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all hover:scale-105">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-8 h-8 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </div>
                <code class="bg-cyan-100 px-2 py-0.5 rounded text-xs font-bold text-cyan-800">software</code>
              </div>
              <div class="text-xs text-gray-600">Software Empresarial</div>
            </button>
            
            <!-- Marketing Icon -->
            <button type="button" onclick="selectServiceIcon('marketing', this)" class="icon-option text-left bg-white p-3 rounded-lg border-2 border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all hover:scale-105">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-8 h-8 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
                  </svg>
                </div>
                <code class="bg-cyan-100 px-2 py-0.5 rounded text-xs font-bold text-cyan-800">marketing</code>
              </div>
              <div class="text-xs text-gray-600">Marketing Digital</div>
            </button>
            
            <!-- Design Icon -->
            <button type="button" onclick="selectServiceIcon('design', this)" class="icon-option text-left bg-white p-3 rounded-lg border-2 border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all hover:scale-105">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-8 h-8 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                  </svg>
                </div>
                <code class="bg-cyan-100 px-2 py-0.5 rounded text-xs font-bold text-cyan-800">design</code>
              </div>
              <div class="text-xs text-gray-600">Dise√±o UX/UI</div>
            </button>
            
            <!-- Maintenance Icon -->
            <button type="button" onclick="selectServiceIcon('maintenance', this)" class="icon-option text-left bg-white p-3 rounded-lg border-2 border-cyan-200 hover:border-cyan-400 hover:shadow-md transition-all hover:scale-105">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-8 h-8 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                </div>
                <code class="bg-cyan-100 px-2 py-0.5 rounded text-xs font-bold text-cyan-800">maintenance</code>
              </div>
              <div class="text-xs text-gray-600">Mantenimiento</div>
            </button>
          </div>
        </div>

        <!-- Row: Icon & Order (Hidden input shows selected icon) -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Icono Seleccionado <span class="text-red-500">*</span>
            </label>
            <input type="text" id="serviceIcon" required readonly class="input-field bg-gray-50 cursor-not-allowed" placeholder="Selecciona un icono arriba">
          </div>
          <div>
            <label class="block text-sm font-semibold text-dark-blue-500/70 mb-2.5">
              Orden
            </label>
            <input type="number" id="serviceOrder" value="0" class="input-field">
          </div>
        </div>

        <!-- Published -->
        <div class="flex items-center gap-3">
          <input type="checkbox" id="servicePublished" checked class="checkbox-custom">
          <label for="servicePublished" class="text-sm font-semibold text-dark-blue-500/70 cursor-pointer">
            Publicado
          </label>
        </div>

        <!-- Actions -->
        <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-dark-blue-500/5">
          <button type="submit" class="btn-primary flex-1 flex items-center justify-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <span id="serviceSaveBtn">Guardar Servicio</span>
            <span id="serviceSaveLoading" class="spinner"></span>
          </button>
          <button type="button" onclick="closeServiceModal()" class="btn-secondary">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ========== QUOTE MODAL ========== -->
  <div id="quoteModal" class="modal">
    <div class="card-static w-full max-w-4xl max-h-[90vh] overflow-y-auto modal-content mx-4">
      <!-- Modal Header -->
      <div class="sticky top-0 z-10 px-4 py-4 sm:px-6 sm:py-5 lg:px-8 lg:py-6 border-b border-dark-blue-500/5 bg-white/95 backdrop-blur flex items-center justify-between gap-4">
        <h3 class="text-lg sm:text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 flex-1 min-w-0 truncate">
          Detalles de Cotizaci√≥n
        </h3>
        <button onclick="closeQuoteModal()" class="w-10 h-10 flex-shrink-0 rounded-xl bg-dark-blue-500/5 hover:bg-red-50 text-dark-blue-500/40 hover:text-red-500 transition-all flex items-center justify-center">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <!-- Modal Body -->
      <div class="p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6">
        <!-- Company Info -->
        <div class="bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-cyan-100">
          <h4 class="text-base sm:text-lg font-semibold text-dark-blue-500 mb-3 sm:mb-4 flex items-center gap-2">
            <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
            </svg>
            Informaci√≥n de la Empresa
          </h4>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
            <div>
              <p class="text-xs text-dark-blue-500/50 mb-1">Empresa</p>
              <p id="quoteCompanyName" class="font-semibold text-dark-blue-500 text-sm sm:text-base"></p>
            </div>
            <div>
              <p class="text-xs text-dark-blue-500/50 mb-1">Giro del Negocio</p>
              <p id="quoteBusinessType" class="text-dark-blue-500 text-sm sm:text-base"></p>
            </div>
            <div>
              <p class="text-xs text-dark-blue-500/50 mb-1">Email</p>
              <p id="quoteContactEmail" class="text-dark-blue-500 text-sm break-all"></p>
            </div>
            <div>
              <p class="text-xs text-dark-blue-500/50 mb-1">Tel√©fono</p>
              <p id="quoteContactPhone" class="text-dark-blue-500 text-sm"></p>
            </div>
          </div>
        </div>

        <!-- Project Details -->
        <div class="space-y-3 sm:space-y-4">
          <h4 class="text-base sm:text-lg font-semibold text-dark-blue-500">Detalles del Proyecto</h4>
          <div id="quoteDetails" class="space-y-2 sm:space-y-3 text-xs sm:text-sm text-dark-blue-500/70"></div>
        </div>

        <!-- Admin Actions -->
        <div class="border-t border-dark-blue-500/10 pt-4 sm:pt-6">
          <h4 class="text-base sm:text-lg font-semibold text-dark-blue-500 mb-3 sm:mb-4">Actualizar Estado</h4>
          <div class="flex flex-col sm:flex-row gap-3 sm:gap-4">
            <select id="quoteStatus" class="flex-1 px-3 sm:px-4 py-2 text-sm sm:text-base border border-dark-blue-500/20 rounded-lg focus:ring-2 focus:ring-cyan-400 outline-none">
              <option value="pending">Pendiente</option>
              <option value="reviewing">Revisando</option>
              <option value="quoted">Cotizado</option>
              <option value="rejected">Rechazado</option>
            </select>
            <button onclick="updateQuoteStatus()" class="btn-primary px-6 py-2 text-sm sm:text-base whitespace-nowrap">
              Actualizar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== CONVERSATION MODAL ========== -->
  <div id="conversationModal" class="modal">
    <div class="card-static w-full max-w-4xl max-h-[90vh] overflow-y-auto modal-content mx-4">
      <!-- Modal Header -->
      <div class="sticky top-0 z-10 px-4 py-4 sm:px-6 sm:py-5 lg:px-8 lg:py-6 border-b border-dark-blue-500/5 bg-white/95 backdrop-blur flex items-center justify-between gap-4">
        <div class="flex-1 min-w-0">
          <h3 class="text-lg sm:text-xl lg:text-2xl font-montserrat-alt text-dark-blue-500 truncate">
            Conversaci√≥n con <span id="conversationVisitorName">Visitante</span>
          </h3>
          <p class="text-xs sm:text-sm text-dark-blue-500/50 mt-1">
            <span id="conversationSessionId"></span> ‚Ä¢ <span id="conversationDate"></span>
          </p>
        </div>
        <button onclick="closeConversationModal()" class="w-10 h-10 flex-shrink-0 rounded-xl bg-dark-blue-500/5 hover:bg-red-50 text-dark-blue-500/40 hover:text-red-500 transition-all flex items-center justify-center">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <!-- Modal Body -->
      <div class="p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6">
        <!-- Visitor Info -->
        <div class="bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-cyan-100">
          <h4 class="text-base sm:text-lg font-semibold text-dark-blue-500 mb-3 sm:mb-4 flex items-center gap-2">
            <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            Informaci√≥n del Visitante
          </h4>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
            <div>
              <p class="text-xs text-dark-blue-500/50 mb-1">Nombre</p>
              <p id="modalVisitorName" class="font-semibold text-dark-blue-500 text-sm sm:text-base">-</p>
            </div>
            <div>
              <p class="text-xs text-dark-blue-500/50 mb-1">Email</p>
              <p id="modalVisitorEmail" class="text-dark-blue-500 text-sm break-all">-</p>
            </div>
            <div class="sm:col-span-2">
              <p class="text-xs text-dark-blue-500/50 mb-1">Notas</p>
              <p id="modalConversationNotes" class="text-dark-blue-500 text-sm">-</p>
            </div>
          </div>
        </div>

        <!-- Messages -->
        <div class="space-y-3 sm:space-y-4">
          <h4 class="text-base sm:text-lg font-semibold text-dark-blue-500 flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
            </svg>
            Conversaci√≥n (<span id="messageCount">0</span> mensajes)
          </h4>
          <div id="conversationMessages" class="space-y-3 bg-gray-50 rounded-xl p-4 max-h-[400px] overflow-y-auto">
            <!-- Messages will be loaded here -->
          </div>
        </div>

        <!-- Admin Actions -->
        <div class="border-t border-dark-blue-500/10 pt-4 sm:pt-6">
          <h4 class="text-base sm:text-lg font-semibold text-dark-blue-500 mb-3 sm:mb-4">Gestionar Conversaci√≥n</h4>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-dark-blue-500/70 mb-2">Estado</label>
              <select id="conversationStatus" class="w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-dark-blue-500/20 rounded-lg focus:ring-2 focus:ring-cyan-400 outline-none">
                <option value="ACTIVE">üí¨ Activa</option>
                <option value="POTENTIAL_LEAD">‚≠ê Lead Potencial</option>
                <option value="HOT_LEAD">üî• Lead Caliente</option>
                <option value="CONVERTED">‚úÖ Convertida</option>
                <option value="CLOSED">üö´ Cerrada</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-dark-blue-500/70 mb-2">Notas</label>
              <textarea id="conversationNotesInput" rows="3" class="w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-dark-blue-500/20 rounded-lg focus:ring-2 focus:ring-cyan-400 outline-none resize-none" placeholder="Agrega notas sobre esta conversaci√≥n..."></textarea>
            </div>
            <div class="flex flex-col sm:flex-row gap-3">
              <button onclick="updateConversationStatus()" class="btn-primary flex-1 sm:flex-none px-6 py-2 text-sm sm:text-base">
                Actualizar Conversaci√≥n
              </button>
              <button onclick="deleteConversation()" class="px-6 py-2 text-sm sm:text-base bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-red-500/20 flex items-center justify-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
                Eliminar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script is:inline src="/admin/admin.js"></script>
  
  <script is:inline>
    // Auto-resize textareas
    function autoResizeTextarea(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = textarea.scrollHeight + 'px';
    }
    
    // Initialize auto-resize for existing textareas
    document.addEventListener('DOMContentLoaded', () => {
      const textareas = document.querySelectorAll('textarea.auto-resize');
      textareas.forEach(textarea => {
        // Set initial height
        autoResizeTextarea(textarea);
        
        // Add input event listener
        textarea.addEventListener('input', () => autoResizeTextarea(textarea));
      });
      
      // Watch for dynamically added textareas (in content blocks)
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          mutation.addedNodes.forEach((node) => {
            if (node.nodeType === 1) { // Element node
              const textareas = node.querySelectorAll ? node.querySelectorAll('textarea.auto-resize') : [];
              textareas.forEach(textarea => {
                autoResizeTextarea(textarea);
                textarea.addEventListener('input', () => autoResizeTextarea(textarea));
              });
            }
          });
        });
      });
      
      // Observe the content blocks container
      const contentBlocksContainer = document.getElementById('contentBlocksContainer');
      if (contentBlocksContainer) {
        observer.observe(contentBlocksContainer, { childList: true, subtree: true });
      }
    });
  </script>
</body>
</html>
